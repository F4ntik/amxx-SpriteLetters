# Sprite Letters

Плагин для AMX Mod X, позволяющий строить трёхмерные надписи из спрайтов и управлять ими прямо на сервере Counter-Strike 1.6.

## Требования

- AMX Mod X 1.9.0 или новее
- ReAPI (последний релиз с GitHub)
- Модуль `json` (поставляется с AMXX 1.9)

## Быстрая установка

1. Скомпилируйте проект (`build.bat`) либо возьмите готовые `*.amxx` из каталога `amxmodx/scripting/compiled/`.
2. Скопируйте плагины в `addons/amxmodx/plugins/`:
   - `SprLetters.amxx`
   - `SprLett-Editor.amxx`
   - `SprLett-Saver.amxx`
   - `SprLett-Gradient.amxx` (опционально)
3. Подключите их в `addons/amxmodx/configs/plugins.ini` или используйте сгенерированный `plugins-SprLett.ini`.
4. Убедитесь, что в `modules.ini` включены `reapi` и `json`.
5. Скопируйте папку `sprites/SprLett/` на сервер (минимум набор `Charsets/Default/`).
6. Перезапустите карту/сервер.

## Компиляция из исходников

Запустите `build.bat` (двойной клик или из PowerShell). Скрипт соберёт все `.sma` из `amxmodx/scripting/` и положит свежие `.amxx` в `amxmodx/scripting/compiled/`.

## Использование редактора

- Команда `slmainmenu` открывает главное меню редактора.
- `Создать слово` — создаёт выбранный текст перед игроком.
- Подменю позволяют настраивать позицию, углы, направление, цвет, режим рендера, интервалы между буквами и т.д.
- `Прочее` содержит действия по смене шрифта (`Charset`), ручному редактированию текста, сохранению и удалению слова.

### Бегущая строка

Через пункт «Бегущая строка» можно включить прокрутку текста:

- Статус, ID, ширина окна, скорость и текущий текст отображаются вверху меню.
- «Включить/отключить» включает режим с дефолтной шириной (10) и скоростью (5.0) и при необходимости выставляет уникальный ID.
- «Установить ID» — идентификатор для синхронизации нескольких строк.
- «Изменить ширину» — сколько символов видно одновременно. Ноль отключает бегущую строку.
- «Задать скорость» — символов в секунду; допускаются дробные значения.
- «Обновить текст» — полный текст прокрутки.
- «Сбросить позицию» возвращает прокрутку к началу.

### Рекомендуемый рабочий процесс

1. `slmainmenu` → «Создать слово» и введите текст (например, `WELCOME`).
2. В подменю «Переместить» и «Повернуть» выставьте позицию и ориентацию.
3. Через «Цвет» и «Рендер» задайте оформление.
4. В «Бегущей строке» включите прокрутку, задайте ширину 12 и скорость 3.5, обновите текст на `WELCOME TO SERVER`.
5. «Прочее» → «Сохранить слово». Плагин Saver запишет конфигурацию и восстановит надписи при следующем запуске карты.

## Команды (консоль администратора)

- `slmainmenu` — главное меню.
- `slcreate <text>` — создать слово перед игроком.
- `slselect` — выбрать ближайшее слово (нужно смотреть на объект).
- `slwrite <text>` — заменить текст текущего слова.
- `slsave` / `slremove` — сохранить / удалить выбранное слово.
- Серверные команды для бегущей строки: `sl_marquee_text <id> <text>`, `sl_marquee_width <id> <width>`, `sl_marquee_speed <id> <speed>`.

## Сохранения

Плагин `[SprLett] Saver` автоматически создаёт файл `addons/amxmodx/configs/plugins/SpriteLetters/Saves/<map>.json`, куда записывает параметры всех слов на карте. При смене карты или перезапуске сервера надписи восстанавливаются.

## Шрифты и чарсеты

Чарсеты лежат в `sprites/SprLett/Charsets/<Имя>/` и состоят из двух файлов:

- `chars.spr` — спрайт с символами;
- `map.txt` — сопоставление символов и кадров в формате `A 1`.

Чтобы добавить новый набор, создайте каталог, положите в него спрайт и карту символов, после чего выберите его в меню «Прочее» → «Шрифт».

## Часто задаваемые вопросы

**Где искать собранные плагины?** — В `amxmodx/scripting/compiled/`.

**Я вижу «кракозябры» в `SpriteLetters.ini`.** — Файл должен быть в `UTF-8` без BOM. В репозитории лежит готовая версия.

**Можно ли управлять словами из другого плагина?** — Используйте нативы из `include/SprLetters.inc` (`SprLett_InitWord`, `SprLett_BuildWord`, `SprLett_SaveWord` и т.д.).

## Лицензия

Проект распространяется на условиях MIT License.
